{"ast":null,"code":"export default {\n  name: \"ComplainList\",\n  data() {\n    return {\n      // 投诉表单\n      complaintForm: {\n        content: ''\n      },\n      // 提交状态\n      submitting: false,\n      // 投诉列表数据\n      complaintList: [{\n        id: 1,\n        time: '2023-10-25 14:30:25',\n        content: '服务态度很差，工作人员不耐烦，希望能改进服务态度。',\n        handler: '李经理',\n        status: '已处理',\n        result: '已对相关工作人员进行培训，感谢您的反馈。',\n        handleTime: '2023-10-26 09:15:00'\n      }, {\n        id: 2,\n        time: '2023-10-24 10:15:30',\n        content: '产品质量有问题，使用不到一周就出现故障，要求退货退款。',\n        handler: '张专员',\n        status: '处理中',\n        result: '',\n        handleTime: ''\n      }, {\n        id: 3,\n        time: '2023-10-23 16:45:12',\n        content: '发货速度太慢，下单后三天才发货，物流信息更新不及时。',\n        handler: '',\n        status: '待处理',\n        result: '',\n        handleTime: ''\n      }, {\n        id: 4,\n        time: '2023-10-22 09:20:45',\n        content: '产品描述与实物不符，尺寸偏差较大，颜色也有色差。',\n        handler: '王主管',\n        status: '已处理',\n        result: '已为您办理退货退款，我们会加强品控管理。',\n        handleTime: '2023-10-23 14:30:00'\n      }, {\n        id: 5,\n        time: '2023-10-21 15:10:33',\n        content: '售后服务响应慢，电话长时间无人接听，在线客服回复不及时。',\n        handler: '赵经理',\n        status: '已处理',\n        result: '已增加客服人员，延长服务时间，提升响应速度。',\n        handleTime: '2023-10-22 11:20:00'\n      }],\n      // 分页配置\n      pagination: {\n        currentPage: 1,\n        pageSize: 10,\n        total: 5\n      },\n      // 详情弹窗\n      detailDialogVisible: false,\n      currentComplaint: {}\n    };\n  },\n  created() {\n    // 模拟从API加载数据\n    this.loadComplaintList();\n  },\n  methods: {\n    // 返回上一页\n    goBack() {\n      this.$router.go(-1);\n    },\n    // 提交投诉\n    async submitComplaint() {\n      if (!this.complaintForm.content.trim()) {\n        this.$message.warning('请输入投诉内容');\n        return;\n      }\n      this.submitting = true;\n      try {\n        // 模拟API调用\n        await new Promise(resolve => setTimeout(resolve, 1000));\n\n        // 创建新的投诉记录\n        const newComplaint = {\n          id: Date.now(),\n          time: new Date().toLocaleString('zh-CN'),\n          content: this.complaintForm.content,\n          handler: '',\n          status: '待处理',\n          result: '',\n          handleTime: ''\n        };\n\n        // 添加到列表\n        this.complaintList.unshift(newComplaint);\n        this.pagination.total++;\n\n        // 重置表单\n        this.resetForm();\n        this.$message.success('投诉提交成功！');\n      } catch (error) {\n        console.error('提交失败:', error);\n        this.$message.error('提交失败，请重试');\n      } finally {\n        this.submitting = false;\n      }\n    },\n    // 重置表单\n    resetForm() {\n      this.complaintForm.content = '';\n    },\n    // 刷新列表\n    async refreshList() {\n      // 模拟重新加载数据\n      this.$message.info('刷新成功');\n    },\n    // 加载投诉列表\n    async loadComplaintList() {\n      // 实际项目中这里应该调用API\n      // const response = await this.$Post(\"/Complaint/List\", {});\n      // this.complaintList = response.Data;\n    },\n    // 查看详情\n    viewDetail(row) {\n      this.currentComplaint = {\n        ...row\n      };\n      this.detailDialogVisible = true;\n    },\n    // 截断内容\n    truncateContent(content) {\n      if (!content) return '';\n      if (content.length > 50) {\n        return content.substring(0, 50) + '...';\n      }\n      return content;\n    },\n    // 根据状态获取标签类型\n    getStatusType(status) {\n      const statusMap = {\n        '待处理': 'warning',\n        '处理中': 'info',\n        '已处理': 'success',\n        '已关闭': 'danger'\n      };\n      return statusMap[status] || 'info';\n    },\n    // 表格行样式\n    tableRowClassName({\n      row,\n      rowIndex\n    }) {\n      if (row.status === '待处理') {\n        return 'pending-row';\n      }\n      return '';\n    },\n    // 分页大小改变\n    handleSizeChange(val) {\n      this.pagination.pageSize = val;\n      this.loadComplaintList();\n    },\n    // 当前页改变\n    handleCurrentChange(val) {\n      this.pagination.currentPage = val;\n      this.loadComplaintList();\n    }\n  }\n};","map":{"version":3,"names":["name","data","complaintForm","content","submitting","complaintList","id","time","handler","status","result","handleTime","pagination","currentPage","pageSize","total","detailDialogVisible","currentComplaint","created","loadComplaintList","methods","goBack","$router","go","submitComplaint","trim","$message","warning","Promise","resolve","setTimeout","newComplaint","Date","now","toLocaleString","unshift","resetForm","success","error","console","refreshList","info","viewDetail","row","truncateContent","length","substring","getStatusType","statusMap","tableRowClassName","rowIndex","handleSizeChange","val","handleCurrentChange"],"sources":["src/views/Front/ComplaintList.vue"],"sourcesContent":["<template>\r\n  <div class=\"complaint-container\">\r\n    <!-- 页面头部 -->\r\n    <el-page-header \r\n      class=\"page-header\" \r\n      @back=\"goBack\" \r\n      content=\"投诉建议\"\r\n    ></el-page-header>\r\n\r\n    <!-- 投诉输入区域 -->\r\n    <el-card class=\"input-card margin-top-lg\">\r\n      <div slot=\"header\" class=\"clearfix\">\r\n        <span>我要投诉</span>\r\n      </div>\r\n      <el-form :model=\"complaintForm\" ref=\"complaintFormRef\">\r\n        <el-form-item>\r\n          <el-input\r\n            type=\"textarea\"\r\n            :rows=\"4\"\r\n            v-model=\"complaintForm.content\"\r\n            placeholder=\"请输入您的投诉内容...\"\r\n            maxlength=\"500\"\r\n            show-word-limit\r\n          ></el-input>\r\n        </el-form-item>\r\n        <el-form-item>\r\n          <el-button \r\n            type=\"primary\" \r\n            @click=\"submitComplaint\"\r\n            :loading=\"submitting\"\r\n          >提交投诉</el-button>\r\n          <el-button @click=\"resetForm\">清空</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </el-card>\r\n\r\n    <!-- 投诉记录列表 -->\r\n    <el-card class=\"list-card margin-top-lg\">\r\n      <div slot=\"header\" class=\"clearfix\">\r\n        <span>投诉记录</span>\r\n        <el-button \r\n          type=\"primary\" \r\n          size=\"mini\" \r\n          icon=\"el-icon-refresh\" \r\n          @click=\"refreshList\"\r\n          style=\"float: right;\"\r\n        >刷新</el-button>\r\n      </div>\r\n      \r\n      <el-table\r\n        :data=\"complaintList\"\r\n        style=\"width: 100%\"\r\n        @row-click=\"viewDetail\"\r\n        :row-class-name=\"tableRowClassName\"\r\n      >\r\n        <el-table-column\r\n          prop=\"time\"\r\n          label=\"投诉时间\"\r\n          width=\"180\"\r\n          align=\"center\"\r\n        >\r\n        </el-table-column>\r\n        \r\n        <el-table-column\r\n          prop=\"content\"\r\n          label=\"投诉内容\"\r\n          min-width=\"300\"\r\n        >\r\n          <template slot-scope=\"scope\">\r\n            <div class=\"complaint-content\">\r\n              {{ truncateContent(scope.row.content) }}\r\n            </div>\r\n          </template>\r\n        </el-table-column>\r\n        \r\n        <el-table-column\r\n          prop=\"handler\"\r\n          label=\"处理人\"\r\n          width=\"120\"\r\n          align=\"center\"\r\n        >\r\n          <template slot-scope=\"scope\">\r\n            <span v-if=\"scope.row.handler\">{{ scope.row.handler }}</span>\r\n            <span v-else style=\"color: #909399;\">未分配</span>\r\n          </template>\r\n        </el-table-column>\r\n        \r\n        <el-table-column\r\n          prop=\"status\"\r\n          label=\"处理状态\"\r\n          width=\"120\"\r\n          align=\"center\"\r\n        >\r\n          <template slot-scope=\"scope\">\r\n            <el-tag \r\n              :type=\"getStatusType(scope.row.status)\"\r\n              size=\"small\"\r\n            >\r\n              {{ scope.row.status }}\r\n            </el-tag>\r\n          </template>\r\n        </el-table-column>\r\n        \r\n        <el-table-column\r\n          label=\"操作\"\r\n          width=\"100\"\r\n          align=\"center\"\r\n        >\r\n          <template slot-scope=\"scope\">\r\n            <el-button \r\n              type=\"text\" \r\n              size=\"small\" \r\n              @click.stop=\"viewDetail(scope.row)\"\r\n            >查看详情</el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      \r\n      <!-- 分页 -->\r\n      <div class=\"pagination-container\">\r\n        <el-pagination\r\n          @size-change=\"handleSizeChange\"\r\n          @current-change=\"handleCurrentChange\"\r\n          :current-page=\"pagination.currentPage\"\r\n          :page-sizes=\"[10, 20, 50]\"\r\n          :page-size=\"pagination.pageSize\"\r\n          layout=\"total, sizes, prev, pager, next, jumper\"\r\n          :total=\"pagination.total\"\r\n        ></el-pagination>\r\n      </div>\r\n    </el-card>\r\n\r\n    <!-- 投诉详情弹窗 -->\r\n    <el-dialog\r\n      title=\"投诉详情\"\r\n      :visible.sync=\"detailDialogVisible\"\r\n      width=\"600px\"\r\n      center\r\n    >\r\n      <div class=\"complaint-detail\">\r\n        <el-descriptions :column=\"1\" border>\r\n          <el-descriptions-item label=\"投诉时间\">\r\n            {{ currentComplaint.time }}\r\n          </el-descriptions-item>\r\n          \r\n          <el-descriptions-item label=\"投诉内容\">\r\n            <div class=\"detail-content\">\r\n              {{ currentComplaint.content }}\r\n            </div>\r\n          </el-descriptions-item>\r\n          \r\n          <el-descriptions-item label=\"处理人\">\r\n            <span v-if=\"currentComplaint.handler\">\r\n              {{ currentComplaint.handler }}\r\n            </span>\r\n            <span v-else style=\"color: #909399;\">未分配</span>\r\n          </el-descriptions-item>\r\n          \r\n          <el-descriptions-item label=\"处理状态\">\r\n            <el-tag \r\n              :type=\"getStatusType(currentComplaint.status)\"\r\n              size=\"medium\"\r\n            >\r\n              {{ currentComplaint.status }}\r\n            </el-tag>\r\n          </el-descriptions-item>\r\n          \r\n          <el-descriptions-item \r\n            label=\"处理结果\" \r\n            v-if=\"currentComplaint.result\"\r\n          >\r\n            <div class=\"detail-result\">\r\n              {{ currentComplaint.result }}\r\n            </div>\r\n          </el-descriptions-item>\r\n          \r\n          <el-descriptions-item \r\n            label=\"处理时间\" \r\n            v-if=\"currentComplaint.handleTime\"\r\n          >\r\n            {{ currentComplaint.handleTime }}\r\n          </el-descriptions-item>\r\n        </el-descriptions>\r\n      </div>\r\n      \r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"detailDialogVisible = false\">关 闭</el-button>\r\n        <el-button \r\n          type=\"primary\" \r\n          @click=\"detailDialogVisible = false\"\r\n        >确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"ComplainList\",\r\n  data() {\r\n    return {\r\n      // 投诉表单\r\n      complaintForm: {\r\n        content: ''\r\n      },\r\n      \r\n      // 提交状态\r\n      submitting: false,\r\n      \r\n      // 投诉列表数据\r\n      complaintList: [\r\n        {\r\n          id: 1,\r\n          time: '2023-10-25 14:30:25',\r\n          content: '服务态度很差，工作人员不耐烦，希望能改进服务态度。',\r\n          handler: '李经理',\r\n          status: '已处理',\r\n          result: '已对相关工作人员进行培训，感谢您的反馈。',\r\n          handleTime: '2023-10-26 09:15:00'\r\n        },\r\n        {\r\n          id: 2,\r\n          time: '2023-10-24 10:15:30',\r\n          content: '产品质量有问题，使用不到一周就出现故障，要求退货退款。',\r\n          handler: '张专员',\r\n          status: '处理中',\r\n          result: '',\r\n          handleTime: ''\r\n        },\r\n        {\r\n          id: 3,\r\n          time: '2023-10-23 16:45:12',\r\n          content: '发货速度太慢，下单后三天才发货，物流信息更新不及时。',\r\n          handler: '',\r\n          status: '待处理',\r\n          result: '',\r\n          handleTime: ''\r\n        },\r\n        {\r\n          id: 4,\r\n          time: '2023-10-22 09:20:45',\r\n          content: '产品描述与实物不符，尺寸偏差较大，颜色也有色差。',\r\n          handler: '王主管',\r\n          status: '已处理',\r\n          result: '已为您办理退货退款，我们会加强品控管理。',\r\n          handleTime: '2023-10-23 14:30:00'\r\n        },\r\n        {\r\n          id: 5,\r\n          time: '2023-10-21 15:10:33',\r\n          content: '售后服务响应慢，电话长时间无人接听，在线客服回复不及时。',\r\n          handler: '赵经理',\r\n          status: '已处理',\r\n          result: '已增加客服人员，延长服务时间，提升响应速度。',\r\n          handleTime: '2023-10-22 11:20:00'\r\n        }\r\n      ],\r\n      \r\n      // 分页配置\r\n      pagination: {\r\n        currentPage: 1,\r\n        pageSize: 10,\r\n        total: 5\r\n      },\r\n      \r\n      // 详情弹窗\r\n      detailDialogVisible: false,\r\n      currentComplaint: {}\r\n    };\r\n  },\r\n  created() {\r\n    // 模拟从API加载数据\r\n    this.loadComplaintList();\r\n  },\r\n  methods: {\r\n    // 返回上一页\r\n    goBack() {\r\n      this.$router.go(-1);\r\n    },\r\n    \r\n    // 提交投诉\r\n    async submitComplaint() {\r\n      if (!this.complaintForm.content.trim()) {\r\n        this.$message.warning('请输入投诉内容');\r\n        return;\r\n      }\r\n      \r\n      this.submitting = true;\r\n      \r\n      try {\r\n        // 模拟API调用\r\n        await new Promise(resolve => setTimeout(resolve, 1000));\r\n        \r\n        // 创建新的投诉记录\r\n        const newComplaint = {\r\n          id: Date.now(),\r\n          time: new Date().toLocaleString('zh-CN'),\r\n          content: this.complaintForm.content,\r\n          handler: '',\r\n          status: '待处理',\r\n          result: '',\r\n          handleTime: ''\r\n        };\r\n        \r\n        // 添加到列表\r\n        this.complaintList.unshift(newComplaint);\r\n        this.pagination.total++;\r\n        \r\n        // 重置表单\r\n        this.resetForm();\r\n        \r\n        this.$message.success('投诉提交成功！');\r\n        \r\n      } catch (error) {\r\n        console.error('提交失败:', error);\r\n        this.$message.error('提交失败，请重试');\r\n      } finally {\r\n        this.submitting = false;\r\n      }\r\n    },\r\n    \r\n    // 重置表单\r\n    resetForm() {\r\n      this.complaintForm.content = '';\r\n    },\r\n    \r\n    // 刷新列表\r\n    async refreshList() {\r\n      // 模拟重新加载数据\r\n      this.$message.info('刷新成功');\r\n    },\r\n    \r\n    // 加载投诉列表\r\n    async loadComplaintList() {\r\n      // 实际项目中这里应该调用API\r\n      // const response = await this.$Post(\"/Complaint/List\", {});\r\n      // this.complaintList = response.Data;\r\n    },\r\n    \r\n    // 查看详情\r\n    viewDetail(row) {\r\n      this.currentComplaint = { ...row };\r\n      this.detailDialogVisible = true;\r\n    },\r\n    \r\n    // 截断内容\r\n    truncateContent(content) {\r\n      if (!content) return '';\r\n      if (content.length > 50) {\r\n        return content.substring(0, 50) + '...';\r\n      }\r\n      return content;\r\n    },\r\n    \r\n    // 根据状态获取标签类型\r\n    getStatusType(status) {\r\n      const statusMap = {\r\n        '待处理': 'warning',\r\n        '处理中': 'info',\r\n        '已处理': 'success',\r\n        '已关闭': 'danger'\r\n      };\r\n      return statusMap[status] || 'info';\r\n    },\r\n    \r\n    // 表格行样式\r\n    tableRowClassName({ row, rowIndex }) {\r\n      if (row.status === '待处理') {\r\n        return 'pending-row';\r\n      }\r\n      return '';\r\n    },\r\n    \r\n    // 分页大小改变\r\n    handleSizeChange(val) {\r\n      this.pagination.pageSize = val;\r\n      this.loadComplaintList();\r\n    },\r\n    \r\n    // 当前页改变\r\n    handleCurrentChange(val) {\r\n      this.pagination.currentPage = val;\r\n      this.loadComplaintList();\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.complaint-container {\r\n  padding: 20px;\r\n}\r\n\r\n.page-header {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.input-card,\r\n.list-card {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.complaint-content {\r\n  line-height: 1.5;\r\n}\r\n\r\n.detail-content,\r\n.detail-result {\r\n  line-height: 1.6;\r\n  padding: 8px;\r\n  background-color: #f5f7fa;\r\n  border-radius: 4px;\r\n  word-break: break-word;\r\n}\r\n\r\n.pagination-container {\r\n  margin-top: 20px;\r\n  text-align: right;\r\n}\r\n\r\n\r\n.margin-top-lg {\r\n  margin-top: 16px;\r\n}\r\n\r\n.clearfix:before,\r\n.clearfix:after {\r\n  display: table;\r\n  content: \"\";\r\n}\r\n.clearfix:after {\r\n  clear: both;\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}