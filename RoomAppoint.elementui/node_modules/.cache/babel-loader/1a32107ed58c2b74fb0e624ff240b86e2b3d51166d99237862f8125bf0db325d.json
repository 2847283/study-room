{"ast":null,"code":"import store from '@/store';\nimport { mapGetters } from 'vuex';\nexport default {\n  name: \"ComplainList\",\n  computed: {\n    ...mapGetters(['Token', 'UserInfo', 'RoleType', 'HasUserInfo', 'ColumnType', \"UserId\"])\n  },\n  data() {\n    return {\n      where: {},\n      searchForm: {},\n      // 搜索定义的数据对象\n      dataColum: [{\n        key: \"Id\",\n        hidden: true\n      }, {\n        key: \"Title\",\n        title: \"投诉标题\",\n        type: store.getters.ColumnType.SHORTTEXT\n      }, {\n        key: \"UserId\",\n        hidden: true\n      }, {\n        key: \"UserDto.Name\",\n        title: \"投诉用户\",\n        type: store.getters.ColumnType.SHORTTEXT\n      }, {\n        key: \"ComplainType\",\n        title: \"投诉类型\",\n        type: store.getters.ColumnType.SHORTTEXT,\n        formatter: row => {\n          return this.getComplainTypeText(row.ComplainType);\n        }\n      }, {\n        key: \"Status\",\n        title: \"处理状态\",\n        type: store.getters.ColumnType.SHORTTEXT,\n        formatter: row => {\n          return this.getStatusText(row.Status);\n        }\n      }, {\n        key: \"CreateTime\",\n        title: \"创建时间\",\n        type: store.getters.ColumnType.DATETIME\n      }, {\n        key: \"UpdateTime\",\n        title: \"更新时间\",\n        type: store.getters.ColumnType.DATETIME\n      }, {\n        key: \"operation\",\n        title: \"操作\",\n        type: store.getters.ColumnType.OPERATION,\n        fixed: 'right',\n        width: 200\n      }],\n      editModalFormRules: {\n        \"Title\": [{\n          required: true,\n          message: '投诉标题为必填项',\n          trigger: 'blur'\n        }],\n        \"UserId\": [{\n          required: true,\n          message: '投诉用户为必填项',\n          trigger: 'blur'\n        }],\n        \"ComplainType\": [{\n          required: true,\n          message: '投诉类型为必填项',\n          trigger: 'change'\n        }],\n        \"Content\": [{\n          required: true,\n          message: '投诉内容为必填项',\n          trigger: 'blur'\n        }],\n        \"Status\": [{\n          required: true,\n          message: '处理状态为必填项',\n          trigger: 'change'\n        }]\n      },\n      formData: {\n        Title: \"\",\n        UserId: \"\",\n        ComplainType: \"\",\n        Content: \"\",\n        Status: \"pending\",\n        ProcessResult: \"\",\n        Attachments: []\n      },\n      // 保存或者修改定义的数据对象\n      editorShow: false,\n      detailShow: false,\n      currentComplain: null\n    };\n  },\n  created() {\n    // 初始化数据\n  },\n  methods: {\n    // 获取投诉类型文本\n    getComplainTypeText(type) {\n      const typeMap = {\n        'service': '服务态度',\n        'quality': '产品质量',\n        'logistics': '物流问题',\n        'false_ad': '虚假宣传',\n        'other': '其他'\n      };\n      return typeMap[type] || '未知';\n    },\n    // 获取状态文本\n    getStatusText(status) {\n      const statusMap = {\n        'pending': '待处理',\n        'processing': '处理中',\n        'resolved': '已处理',\n        'closed': '已关闭'\n      };\n      return statusMap[status] || '未知';\n    },\n    // 获取投诉类型标签样式\n    getComplainTypeTag(type) {\n      const tagMap = {\n        'service': 'warning',\n        'quality': 'danger',\n        'logistics': 'info',\n        'false_ad': 'danger',\n        'other': ''\n      };\n      return tagMap[type] || '';\n    },\n    // 获取状态标签样式\n    getStatusTag(status) {\n      const tagMap = {\n        'pending': 'danger',\n        'processing': 'warning',\n        'resolved': 'success',\n        'closed': 'info'\n      };\n      return tagMap[status] || '';\n    },\n    // 修改属性\n    async UpdateEntityAsync(Id, title, data) {\n      let {\n        Data\n      } = await this.$PostSigleUpdate(`/Complain/Get`, `/Complain/CreateOrEdit`, Id, title, data);\n      this.$refs.PaginationTableId.Reload(this.searchForm);\n    },\n    /**\r\n     * 点击新增或者编辑的时候会触发\r\n     */\n    async ShowEditModal(Id) {\n      if (Id) {\n        let {\n          Data\n        } = await this.$Post(`/Complain/Get`, {\n          Id: Id\n        });\n        this.formData = Data;\n      } else {\n        // 新增时重置表单\n        this.formData = {\n          Title: \"\",\n          UserId: \"\",\n          ComplainType: \"\",\n          Content: \"\",\n          Status: \"pending\",\n          ProcessResult: \"\",\n          Attachments: []\n        };\n      }\n      this.editorShow = true;\n    },\n    /**\r\n     * 查看投诉详情\r\n     */\n    async ShowDetailModal(row) {\n      this.currentComplain = row;\n      this.detailShow = true;\n    },\n    /**\r\n     * 点击保存的时候会触发\r\n     */\n    async CreateOrEditForm() {\n      this.$refs.editModalForm.validate(async valid => {\n        if (valid) {\n          var {\n            Success\n          } = await this.$Post(`/Complain/CreateOrEdit`, this.formData);\n          if (Success) {\n            this.$message.success(this.formData.Id ? '修改成功' : '新增成功');\n            this.editorShow = false;\n            this.$refs.PaginationTableId.Reload(this.searchForm);\n          }\n        }\n      });\n    },\n    /**\r\n     * 单个删除的时候会触发\r\n     */\n    async ShowDeleteModal(Id) {\n      this.$confirm('确定要删除这条投诉记录吗?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(async () => {\n        await this.$PostDelete(`/Complain/Delete`, {\n          Id: Id\n        });\n        this.$refs.PaginationTableId.Reload(this.searchForm);\n        this.$message.success('删除成功');\n      }).catch(() => {\n        // 用户取消删除\n      });\n    },\n    /**\r\n     * 批量删除的时候会触发\r\n     */\n    async ShowBatchDeleteModal() {\n      var ids = this.$refs.PaginationTableId.GetSelectionRow().map(x => x.Id);\n      if (ids.length == 0) {\n        this.$message.error(\"请选择需要删除的记录\");\n        return;\n      }\n      this.$confirm('确定要删除选中的投诉记录吗?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(async () => {\n        await this.$PostDelete(`/Complain/BatchDelete`, {\n          Ids: ids\n        });\n        this.$refs.PaginationTableId.Reload(this.searchForm);\n        this.$message.success('删除成功');\n      }).catch(() => {\n        // 用户取消删除\n      });\n    },\n    /**\r\n     * 点击表格搜索按钮会触发\r\n     */\n    async SearchClick() {\n      this.$refs.PaginationTableId.Reload(this.searchForm);\n    },\n    /**\r\n     * 点击清空表单会触发\r\n     */\n    async ResetClick() {\n      this.searchForm = {};\n      this.$refs.PaginationTableId.Reload(this.searchForm);\n    },\n    /**\r\n     * 文件上传成功处理\r\n     */\n    handleUploadSuccess(response, file, fileList) {\n      this.formData.Attachments = fileList;\n    },\n    /**\r\n     * 文件移除处理\r\n     */\n    handleUploadRemove(file, fileList) {\n      this.formData.Attachments = fileList;\n    }\n  }\n};","map":{"version":3,"names":["store","mapGetters","name","computed","data","where","searchForm","dataColum","key","hidden","title","type","getters","ColumnType","SHORTTEXT","formatter","row","getComplainTypeText","ComplainType","getStatusText","Status","DATETIME","OPERATION","fixed","width","editModalFormRules","required","message","trigger","formData","Title","UserId","Content","ProcessResult","Attachments","editorShow","detailShow","currentComplain","created","methods","typeMap","status","statusMap","getComplainTypeTag","tagMap","getStatusTag","UpdateEntityAsync","Id","Data","$PostSigleUpdate","$refs","PaginationTableId","Reload","ShowEditModal","$Post","ShowDetailModal","CreateOrEditForm","editModalForm","validate","valid","Success","$message","success","ShowDeleteModal","$confirm","confirmButtonText","cancelButtonText","then","$PostDelete","catch","ShowBatchDeleteModal","ids","GetSelectionRow","map","x","length","error","Ids","SearchClick","ResetClick","handleUploadSuccess","response","file","fileList","handleUploadRemove"],"sources":["src/views/Admin/ComplaintList.vue"],"sourcesContent":["<template>\r\n    <div class=\"app-container\">\r\n        <el-card class=\"box-card\">\r\n            <div slot=\"header\" class=\"clearfix\">\r\n                <span>投诉管理</span>\r\n                <el-button type=\"primary\" size=\"mini\" icon=\"el-icon-search\" @click=\"SearchClick\">搜 索</el-button>\r\n                <el-button type=\"warning\" size=\"mini\" @click=\"ResetClick\" icon=\"el-icon-s-promotion\">重 置</el-button>\r\n            </div>\r\n            <div class=\"tb-body\">\r\n                <el-form ref=\"searchFormRef\" :model=\"searchForm\" :inline=\"true\" label-width=\"120px\" :style=\"`flex:1;`\">\r\n                    <el-form-item label=\"投诉标题\" prop=\"TitleLike\">\r\n                        <el-input v-model.trim=\"searchForm.TitleLike\" placeholder=\"请输入投诉标题\" :clearable=\"true\"></el-input>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"投诉状态\" prop=\"Status\">\r\n                        <el-select v-model=\"searchForm.Status\" placeholder=\"请选择状态\" :clearable=\"true\">\r\n                            <el-option label=\"待处理\" value=\"pending\"></el-option>\r\n                            <el-option label=\"处理中\" value=\"processing\"></el-option>\r\n                            <el-option label=\"已处理\" value=\"resolved\"></el-option>\r\n                            <el-option label=\"已关闭\" value=\"closed\"></el-option>\r\n                        </el-select>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"投诉类型\" prop=\"ComplainType\">\r\n                        <el-select v-model=\"searchForm.ComplainType\" placeholder=\"请选择类型\" :clearable=\"true\">\r\n                            <el-option label=\"服务态度\" value=\"service\"></el-option>\r\n                            <el-option label=\"产品质量\" value=\"quality\"></el-option>\r\n                            <el-option label=\"物流问题\" value=\"logistics\"></el-option>\r\n                            <el-option label=\"虚假宣传\" value=\"false_ad\"></el-option>\r\n                            <el-option label=\"其他\" value=\"other\"></el-option>\r\n                        </el-select>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"投诉用户\">\r\n                        <SigleSelect url=\"/User/List\" columnName=\"Name\" :clearable=\"true\" columnValue=\"Id\"\r\n                            v-model=\"searchForm.UserId\" :where=\"{ RoleType: 2 }\">\r\n                        </SigleSelect>\r\n                    </el-form-item>\r\n                </el-form>\r\n            </div>\r\n        </el-card>\r\n\r\n        <el-dialog :title=\"formData.Id ? '编辑投诉' : '新增投诉'\" :visible.sync=\"editorShow\" width=\"60%\" :lock-scroll=\"true\">\r\n            <el-form v-if=\"editorShow == true\" ref=\"editModalForm\" :rules=\"editModalFormRules\" :model=\"formData\"\r\n                label-width=\"140px\" size=\"mini\">\r\n                <el-row :gutter=\"10\" class=\"EditFromBody\">\r\n                    <el-col :span=\"24\">\r\n                        <el-form-item label=\"投诉标题\" prop=\"Title\">\r\n                            <el-input type=\"text\" v-model.trim=\"formData.Title\" placeholder=\"请输入投诉标题\"\r\n                                :clearable=\"true\"></el-input>\r\n                        </el-form-item>\r\n                    </el-col>\r\n                    <el-col :span=\"24\">\r\n                        <el-form-item label=\"投诉用户\" prop=\"UserId\">\r\n                            <SigleSelect url=\"/User/List\" :where=\"{ RoleType: 2 }\" columnName=\"Name\" columnValue=\"Id\"\r\n                                v-model=\"formData.UserId\">\r\n                            </SigleSelect>\r\n                        </el-form-item>\r\n                    </el-col>\r\n                    <el-col :span=\"24\">\r\n                        <el-form-item label=\"投诉类型\" prop=\"ComplainType\">\r\n                            <el-select v-model=\"formData.ComplainType\" placeholder=\"请选择投诉类型\" style=\"width:100%\">\r\n                                <el-option label=\"服务态度\" value=\"service\"></el-option>\r\n                                <el-option label=\"产品质量\" value=\"quality\"></el-option>\r\n                                <el-option label=\"物流问题\" value=\"logistics\"></el-option>\r\n                                <el-option label=\"虚假宣传\" value=\"false_ad\"></el-option>\r\n                                <el-option label=\"其他\" value=\"other\"></el-option>\r\n                            </el-select>\r\n                        </el-form-item>\r\n                    </el-col>\r\n                    <el-col :span=\"24\">\r\n                        <el-form-item label=\"投诉内容\" prop=\"Content\">\r\n                            <el-input type=\"textarea\" v-model.trim=\"formData.Content\" placeholder=\"请输入投诉内容\"\r\n                                :rows=\"4\" :clearable=\"true\"></el-input>\r\n                        </el-form-item>\r\n                    </el-col>\r\n                    <el-col :span=\"24\">\r\n                        <el-form-item label=\"处理状态\" prop=\"Status\">\r\n                            <el-select v-model=\"formData.Status\" placeholder=\"请选择处理状态\" style=\"width:100%\">\r\n                                <el-option label=\"待处理\" value=\"pending\"></el-option>\r\n                                <el-option label=\"处理中\" value=\"processing\"></el-option>\r\n                                <el-option label=\"已处理\" value=\"resolved\"></el-option>\r\n                                <el-option label=\"已关闭\" value=\"closed\"></el-option>\r\n                            </el-select>\r\n                        </el-form-item>\r\n                    </el-col>\r\n                    <el-col :span=\"24\">\r\n                        <el-form-item label=\"处理结果\" prop=\"ProcessResult\">\r\n                            <el-input type=\"textarea\" v-model.trim=\"formData.ProcessResult\" placeholder=\"请输入处理结果\"\r\n                                :rows=\"3\" :clearable=\"true\"></el-input>\r\n                        </el-form-item>\r\n                    </el-col>\r\n                    <el-col :span=\"24\">\r\n                        <el-form-item label=\"附件上传\" prop=\"Attachments\">\r\n                            <el-upload\r\n                                class=\"upload-demo\"\r\n                                action=\"/api/upload\"\r\n                                :on-success=\"handleUploadSuccess\"\r\n                                :on-remove=\"handleUploadRemove\"\r\n                                :file-list=\"formData.Attachments\"\r\n                                list-type=\"picture\">\r\n                                <el-button size=\"small\" type=\"primary\">点击上传</el-button>\r\n                                <div slot=\"tip\" class=\"el-upload__tip\">支持jpg/png/pdf文件，且不超过5MB</div>\r\n                            </el-upload>\r\n                        </el-form-item>\r\n                    </el-col>\r\n                </el-row>\r\n\r\n                <el-row type=\"flex\" justify=\"end\" align=\"bottom\">\r\n                    <el-form-item>\r\n                        <el-button type=\"primary\" plain @click=\"CreateOrEditForm()\">确 定</el-button>\r\n                        <el-button @click=\"editorShow = false\">取 消</el-button>\r\n                    </el-form-item>\r\n                </el-row>\r\n            </el-form>\r\n        </el-dialog>\r\n\r\n        <!-- 投诉详情对话框 -->\r\n        <el-dialog title=\"投诉详情\" :visible.sync=\"detailShow\" width=\"50%\">\r\n            <el-descriptions v-if=\"currentComplain\" :column=\"1\" border>\r\n                <el-descriptions-item label=\"投诉标题\">{{ currentComplain.Title }}</el-descriptions-item>\r\n                <el-descriptions-item label=\"投诉用户\">{{ currentComplain.UserDto ? currentComplain.UserDto.Name : '' }}</el-descriptions-item>\r\n                <el-descriptions-item label=\"投诉类型\">\r\n                    <el-tag :type=\"getComplainTypeTag(currentComplain.ComplainType)\">\r\n                        {{ getComplainTypeText(currentComplain.ComplainType) }}\r\n                    </el-tag>\r\n                </el-descriptions-item>\r\n                <el-descriptions-item label=\"投诉状态\">\r\n                    <el-tag :type=\"getStatusTag(currentComplain.Status)\">\r\n                        {{ getStatusText(currentComplain.Status) }}\r\n                    </el-tag>\r\n                </el-descriptions-item>\r\n                <el-descriptions-item label=\"投诉内容\">\r\n                    <div style=\"white-space: pre-line;\">{{ currentComplain.Content }}</div>\r\n                </el-descriptions-item>\r\n                <el-descriptions-item label=\"处理结果\" v-if=\"currentComplain.ProcessResult\">\r\n                    <div style=\"white-space: pre-line;\">{{ currentComplain.ProcessResult }}</div>\r\n                </el-descriptions-item>\r\n                <el-descriptions-item label=\"创建时间\">{{ currentComplain.CreateTime }}</el-descriptions-item>\r\n                <el-descriptions-item label=\"更新时间\">{{ currentComplain.UpdateTime }}</el-descriptions-item>\r\n            </el-descriptions>\r\n        </el-dialog>\r\n\r\n        <PaginationTable ref=\"PaginationTableId\" url=\"/Complain/List\" :column=\"dataColum\" :where=\"where\">\r\n            <template v-slot:header>\r\n                <el-button type=\"primary\" size=\"mini\" plain icon=\"el-icon-edit\" @click=\"ShowEditModal()\">新 增 投 诉</el-button>\r\n                <el-button type=\"danger\" size=\"mini\" plain icon=\"el-icon-delete\" @click=\"ShowBatchDeleteModal()\">批 量 删 除</el-button>\r\n            </template>\r\n            \r\n            <template v-slot:operation=\"slotProps\">\r\n                <el-button type=\"text\" size=\"mini\" @click=\"ShowDetailModal(slotProps.row)\">查看详情</el-button>\r\n                <el-button type=\"text\" size=\"mini\" @click=\"ShowEditModal(slotProps.row.Id)\">编辑</el-button>\r\n                <el-button type=\"text\" size=\"mini\" @click=\"ShowDeleteModal(slotProps.row.Id)\">删除</el-button>\r\n            </template>\r\n        </PaginationTable>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport store from '@/store';\r\nimport { mapGetters } from 'vuex'\r\n\r\nexport default {\r\n    name: \"ComplainList\",\r\n    computed: {\r\n        ...mapGetters([\r\n            'Token', 'UserInfo', 'RoleType', 'HasUserInfo', 'ColumnType', \"UserId\"\r\n        ])\r\n    },\r\n    data() {\r\n        return {\r\n            where: {},\r\n            searchForm: {}, // 搜索定义的数据对象\r\n            dataColum: [\r\n                {\r\n                    key: \"Id\",\r\n                    hidden: true,\r\n                },\r\n                {\r\n                    key: \"Title\",\r\n                    title: \"投诉标题\",\r\n                    type: store.getters.ColumnType.SHORTTEXT,\r\n                },\r\n                {\r\n                    key: \"UserId\",\r\n                    hidden: true,\r\n                },\r\n                {\r\n                    key: \"UserDto.Name\",\r\n                    title: \"投诉用户\",\r\n                    type: store.getters.ColumnType.SHORTTEXT,\r\n                },\r\n                {\r\n                    key: \"ComplainType\",\r\n                    title: \"投诉类型\",\r\n                    type: store.getters.ColumnType.SHORTTEXT,\r\n                    formatter: (row) => {\r\n                        return this.getComplainTypeText(row.ComplainType);\r\n                    }\r\n                },\r\n                {\r\n                    key: \"Status\",\r\n                    title: \"处理状态\",\r\n                    type: store.getters.ColumnType.SHORTTEXT,\r\n                    formatter: (row) => {\r\n                        return this.getStatusText(row.Status);\r\n                    }\r\n                },\r\n                {\r\n                    key: \"CreateTime\",\r\n                    title: \"创建时间\",\r\n                    type: store.getters.ColumnType.DATETIME,\r\n                },\r\n                {\r\n                    key: \"UpdateTime\",\r\n                    title: \"更新时间\",\r\n                    type: store.getters.ColumnType.DATETIME,\r\n                },\r\n                {\r\n                    key: \"operation\",\r\n                    title: \"操作\",\r\n                    type: store.getters.ColumnType.OPERATION,\r\n                    fixed: 'right',\r\n                    width: 200\r\n                }\r\n            ],\r\n            editModalFormRules: {\r\n                \"Title\": [\r\n                    { required: true, message: '投诉标题为必填项', trigger: 'blur' },\r\n                ],\r\n                \"UserId\": [\r\n                    { required: true, message: '投诉用户为必填项', trigger: 'blur' },\r\n                ],\r\n                \"ComplainType\": [\r\n                    { required: true, message: '投诉类型为必填项', trigger: 'change' },\r\n                ],\r\n                \"Content\": [\r\n                    { required: true, message: '投诉内容为必填项', trigger: 'blur' },\r\n                ],\r\n                \"Status\": [\r\n                    { required: true, message: '处理状态为必填项', trigger: 'change' },\r\n                ],\r\n            },\r\n            formData: {\r\n                Title: \"\",\r\n                UserId: \"\",\r\n                ComplainType: \"\",\r\n                Content: \"\",\r\n                Status: \"pending\",\r\n                ProcessResult: \"\",\r\n                Attachments: []\r\n            }, // 保存或者修改定义的数据对象\r\n            editorShow: false,\r\n            detailShow: false,\r\n            currentComplain: null\r\n        };\r\n    },\r\n    created() {\r\n        // 初始化数据\r\n    },\r\n    methods: {\r\n        // 获取投诉类型文本\r\n        getComplainTypeText(type) {\r\n            const typeMap = {\r\n                'service': '服务态度',\r\n                'quality': '产品质量',\r\n                'logistics': '物流问题',\r\n                'false_ad': '虚假宣传',\r\n                'other': '其他'\r\n            };\r\n            return typeMap[type] || '未知';\r\n        },\r\n        \r\n        // 获取状态文本\r\n        getStatusText(status) {\r\n            const statusMap = {\r\n                'pending': '待处理',\r\n                'processing': '处理中',\r\n                'resolved': '已处理',\r\n                'closed': '已关闭'\r\n            };\r\n            return statusMap[status] || '未知';\r\n        },\r\n        \r\n        // 获取投诉类型标签样式\r\n        getComplainTypeTag(type) {\r\n            const tagMap = {\r\n                'service': 'warning',\r\n                'quality': 'danger',\r\n                'logistics': 'info',\r\n                'false_ad': 'danger',\r\n                'other': ''\r\n            };\r\n            return tagMap[type] || '';\r\n        },\r\n        \r\n        // 获取状态标签样式\r\n        getStatusTag(status) {\r\n            const tagMap = {\r\n                'pending': 'danger',\r\n                'processing': 'warning',\r\n                'resolved': 'success',\r\n                'closed': 'info'\r\n            };\r\n            return tagMap[status] || '';\r\n        },\r\n        \r\n        // 修改属性\r\n        async UpdateEntityAsync(Id, title, data) {\r\n            let { Data } = await this.$PostSigleUpdate(`/Complain/Get`, `/Complain/CreateOrEdit`, Id, title, data);\r\n            this.$refs.PaginationTableId.Reload(this.searchForm);\r\n        },\r\n        \r\n        /**\r\n         * 点击新增或者编辑的时候会触发\r\n         */\r\n        async ShowEditModal(Id) {\r\n            if (Id) {\r\n                let { Data } = await this.$Post(`/Complain/Get`, { Id: Id });\r\n                this.formData = Data;\r\n            } else {\r\n                // 新增时重置表单\r\n                this.formData = {\r\n                    Title: \"\",\r\n                    UserId: \"\",\r\n                    ComplainType: \"\",\r\n                    Content: \"\",\r\n                    Status: \"pending\",\r\n                    ProcessResult: \"\",\r\n                    Attachments: []\r\n                };\r\n            }\r\n            this.editorShow = true;\r\n        },\r\n        \r\n        /**\r\n         * 查看投诉详情\r\n         */\r\n        async ShowDetailModal(row) {\r\n            this.currentComplain = row;\r\n            this.detailShow = true;\r\n        },\r\n        \r\n        /**\r\n         * 点击保存的时候会触发\r\n         */\r\n        async CreateOrEditForm() {\r\n            this.$refs.editModalForm.validate(async valid => {\r\n                if (valid) {\r\n                    var { Success } = await this.$Post(`/Complain/CreateOrEdit`, this.formData);\r\n                    \r\n                    if (Success) {\r\n                        this.$message.success(this.formData.Id ? '修改成功' : '新增成功');\r\n                        this.editorShow = false;\r\n                        this.$refs.PaginationTableId.Reload(this.searchForm);\r\n                    }\r\n                }\r\n            })\r\n        },\r\n        \r\n        /**\r\n         * 单个删除的时候会触发\r\n         */\r\n        async ShowDeleteModal(Id) {\r\n            this.$confirm('确定要删除这条投诉记录吗?', '提示', {\r\n                confirmButtonText: '确定',\r\n                cancelButtonText: '取消',\r\n                type: 'warning'\r\n            }).then(async () => {\r\n                await this.$PostDelete(`/Complain/Delete`, { Id: Id });\r\n                this.$refs.PaginationTableId.Reload(this.searchForm);\r\n                this.$message.success('删除成功');\r\n            }).catch(() => {\r\n                // 用户取消删除\r\n            });\r\n        },\r\n        \r\n        /**\r\n         * 批量删除的时候会触发\r\n         */\r\n        async ShowBatchDeleteModal() {\r\n            var ids = this.$refs.PaginationTableId.GetSelectionRow().map(x => x.Id);\r\n            if (ids.length == 0) {\r\n                this.$message.error(\"请选择需要删除的记录\");\r\n                return;\r\n            }\r\n            \r\n            this.$confirm('确定要删除选中的投诉记录吗?', '提示', {\r\n                confirmButtonText: '确定',\r\n                cancelButtonText: '取消',\r\n                type: 'warning'\r\n            }).then(async () => {\r\n                await this.$PostDelete(`/Complain/BatchDelete`, { Ids: ids });\r\n                this.$refs.PaginationTableId.Reload(this.searchForm);\r\n                this.$message.success('删除成功');\r\n            }).catch(() => {\r\n                // 用户取消删除\r\n            });\r\n        },\r\n        \r\n        /**\r\n         * 点击表格搜索按钮会触发\r\n         */\r\n        async SearchClick() {\r\n            this.$refs.PaginationTableId.Reload(this.searchForm);\r\n        },\r\n        \r\n        /**\r\n         * 点击清空表单会触发\r\n         */\r\n        async ResetClick() {\r\n            this.searchForm = {};\r\n            this.$refs.PaginationTableId.Reload(this.searchForm);\r\n        },\r\n        \r\n        /**\r\n         * 文件上传成功处理\r\n         */\r\n        handleUploadSuccess(response, file, fileList) {\r\n            this.formData.Attachments = fileList;\r\n        },\r\n        \r\n        /**\r\n         * 文件移除处理\r\n         */\r\n        handleUploadRemove(file, fileList) {\r\n            this.formData.Attachments = fileList;\r\n        }\r\n    },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.app-container {\r\n    padding: 20px;\r\n}\r\n\r\n.box-card {\r\n    margin-bottom: 20px;\r\n}\r\n\r\n.tb-body {\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n}\r\n\r\n.EditFromBody {\r\n    max-height: 60vh;\r\n    overflow-y: auto;\r\n    padding-right: 10px;\r\n}\r\n\r\n.upload-demo {\r\n    width: 100%;\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}