{"ast":null,"code":"import store from '@/store';\nexport default {\n  name: \"ComplaintList\",\n  data() {\n    return {\n      where: {\n        UserId: store.getters.UserId\n      },\n      complaintForm: {\n        content: ''\n      },\n      columns: [{\n        key: \"time\",\n        title: \"时间\",\n        width: \"180\",\n        align: \"center\"\n      }, {\n        key: \"content\",\n        title: \"内容\",\n        formatter: val => val && val.length > 50 ? val.substring(0, 50) + '...' : val\n      }, {\n        key: \"handler\",\n        title: \"处理人\",\n        width: \"120\",\n        align: \"center\"\n      }, {\n        key: \"status\",\n        title: \"状态\",\n        width: \"120\",\n        align: \"center\"\n      }]\n    };\n  },\n  methods: {\n    goBack() {\n      this.$router.go(-1);\n    },\n    async submitComplaint() {\n      if (!this.complaintForm.content.trim()) return this.$message.warning('请输入内容');\n      await this.$Post(\"/Complaint/Create\", this.complaintForm);\n      this.$message.success('提交成功');\n      this.resetForm();\n      this.$refs.tableRef.Reload();\n    },\n    resetForm() {\n      this.complaintForm.content = '';\n    },\n    viewDetail(row) {\n      // 这里可以弹出详情或直接跳转到详情页\n      console.log('查看详情:', row);\n    },\n    getStatusType(status) {\n      const map = {\n        '待处理': 'warning',\n        '处理中': 'info',\n        '已处理': 'success'\n      };\n      return map[status] || 'info';\n    }\n  }\n};","map":{"version":3,"names":["store","name","data","where","UserId","getters","complaintForm","content","columns","key","title","width","align","formatter","val","length","substring","methods","goBack","$router","go","submitComplaint","trim","$message","warning","$Post","success","resetForm","$refs","tableRef","Reload","viewDetail","row","console","log","getStatusType","status","map"],"sources":["src/views/Front/ComplaintList.vue"],"sourcesContent":["<template>\r\n    <div class=\"app-container\">\r\n        <el-page-header class=\"card margin-top-lg\" @back=\"goBack\" content=\"投诉建议\"></el-page-header>\r\n\r\n        <el-card class=\"box-card margin-top-lg\">\r\n            <div slot=\"header\" class=\"clearfix\">\r\n                <span>我要投诉</span>\r\n            </div>\r\n            <el-form :model=\"complaintForm\">\r\n                <el-form-item>\r\n                    <el-input \r\n                        type=\"textarea\" \r\n                        :rows=\"4\" \r\n                        v-model=\"complaintForm.content\" \r\n                        placeholder=\"请输入投诉内容...\" \r\n                        maxlength=\"500\"\r\n                    ></el-input>\r\n                </el-form-item>\r\n                <el-form-item>\r\n                    <el-button type=\"primary\" @click=\"submitComplaint\">提交</el-button>\r\n                    <el-button @click=\"resetForm\">清空</el-button>\r\n                </el-form-item>\r\n            </el-form>\r\n        </el-card>\r\n\r\n        <PaginationTable \r\n            ref=\"tableRef\" \r\n            url=\"/Complaint/List\" \r\n            :column=\"columns\" \r\n            :where=\"where\"\r\n            @row-click=\"viewDetail\"\r\n        >\r\n            <template v-slot:status=\"{ row }\">\r\n                <el-tag :type=\"getStatusType(row.status)\" size=\"small\">{{ row.status }}</el-tag>\r\n            </template>\r\n        </PaginationTable>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport store from '@/store';\r\n\r\nexport default {\r\n    name: \"ComplaintList\",\r\n    data() {\r\n        return {\r\n            where: { UserId: store.getters.UserId },\r\n            complaintForm: { content: '' },\r\n            columns: [\r\n                { key: \"time\", title: \"时间\", width: \"180\", align: \"center\" },\r\n                { \r\n                    key: \"content\", \r\n                    title: \"内容\", \r\n                    formatter: (val) => val && val.length > 50 ? val.substring(0, 50) + '...' : val \r\n                },\r\n                { key: \"handler\", title: \"处理人\", width: \"120\", align: \"center\" },\r\n                { key: \"status\", title: \"状态\", width: \"120\", align: \"center\" }\r\n            ]\r\n        }\r\n    },\r\n    methods: {\r\n        goBack() {\r\n            this.$router.go(-1)\r\n        },\r\n        async submitComplaint() {\r\n            if (!this.complaintForm.content.trim()) return this.$message.warning('请输入内容')\r\n            await this.$Post(\"/Complaint/Create\", this.complaintForm)\r\n            this.$message.success('提交成功')\r\n            this.resetForm()\r\n            this.$refs.tableRef.Reload()\r\n        },\r\n        resetForm() {\r\n            this.complaintForm.content = ''\r\n        },\r\n        viewDetail(row) {\r\n            // 这里可以弹出详情或直接跳转到详情页\r\n            console.log('查看详情:', row)\r\n        },\r\n        getStatusType(status) {\r\n            const map = { '待处理': 'warning', '处理中': 'info', '已处理': 'success' }\r\n            return map[status] || 'info'\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.app-container { padding: 20px; }\r\n.card, .box-card { margin-bottom: 16px; }\r\n.margin-top-lg { margin-top: 16px; }\r\n</style>"],"mappings":"AAwCA,OAAAA,KAAA;AAEA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,KAAA;QAAAC,MAAA,EAAAJ,KAAA,CAAAK,OAAA,CAAAD;MAAA;MACAE,aAAA;QAAAC,OAAA;MAAA;MACAC,OAAA,GACA;QAAAC,GAAA;QAAAC,KAAA;QAAAC,KAAA;QAAAC,KAAA;MAAA,GACA;QACAH,GAAA;QACAC,KAAA;QACAG,SAAA,EAAAC,GAAA,IAAAA,GAAA,IAAAA,GAAA,CAAAC,MAAA,QAAAD,GAAA,CAAAE,SAAA,kBAAAF;MACA,GACA;QAAAL,GAAA;QAAAC,KAAA;QAAAC,KAAA;QAAAC,KAAA;MAAA,GACA;QAAAH,GAAA;QAAAC,KAAA;QAAAC,KAAA;QAAAC,KAAA;MAAA;IAEA;EACA;EACAK,OAAA;IACAC,OAAA;MACA,KAAAC,OAAA,CAAAC,EAAA;IACA;IACA,MAAAC,gBAAA;MACA,UAAAf,aAAA,CAAAC,OAAA,CAAAe,IAAA,gBAAAC,QAAA,CAAAC,OAAA;MACA,WAAAC,KAAA,2BAAAnB,aAAA;MACA,KAAAiB,QAAA,CAAAG,OAAA;MACA,KAAAC,SAAA;MACA,KAAAC,KAAA,CAAAC,QAAA,CAAAC,MAAA;IACA;IACAH,UAAA;MACA,KAAArB,aAAA,CAAAC,OAAA;IACA;IACAwB,WAAAC,GAAA;MACA;MACAC,OAAA,CAAAC,GAAA,UAAAF,GAAA;IACA;IACAG,cAAAC,MAAA;MACA,MAAAC,GAAA;QAAA;QAAA;QAAA;MAAA;MACA,OAAAA,GAAA,CAAAD,MAAA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}