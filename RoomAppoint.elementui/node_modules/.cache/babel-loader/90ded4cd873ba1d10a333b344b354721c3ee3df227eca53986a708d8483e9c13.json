{"ast":null,"code":"export default {\n  name: \"ComplainList\",\n  data() {\n    return {\n      // 新投诉内容\n      newComplaint: {\n        content: '',\n        title: ''\n      },\n      // 搜索表单\n      searchForm: {\n        TitleLike: '',\n        HandlerLike: '',\n        Status: ''\n      },\n      // 当前页码\n      currentPage: 1,\n      // 每页显示条数\n      pageSize: 10,\n      // 投诉记录数据\n      complaints: [{\n        id: 1,\n        time: '2023-10-15 14:30',\n        title: '空调温度问题',\n        content: '自习室空调温度太低，希望能调高一些',\n        handler: '管理员A',\n        status: 'resolved',\n        reply: '已调整空调温度，感谢您的反馈。'\n      }, {\n        id: 2,\n        time: '2023-10-14 09:15',\n        title: '系统卡顿问题',\n        content: '座位预约系统经常卡顿，希望优化',\n        handler: '管理员B',\n        status: 'processing',\n        reply: '我们正在对系统进行优化，预计下周完成。'\n      }, {\n        id: 3,\n        time: '2023-10-12 16:45',\n        title: '噪音投诉',\n        content: '有同学在自习室大声喧哗，影响学习',\n        handler: '',\n        status: 'pending',\n        reply: ''\n      }],\n      // 是否显示详情弹窗\n      showDialog: false,\n      // 当前查看的投诉详情\n      currentComplaint: {}\n    };\n  },\n  computed: {\n    // 过滤后的投诉记录（根据搜索条件）\n    filteredComplaints() {\n      let filtered = this.complaints;\n      if (this.searchForm.TitleLike) {\n        filtered = filtered.filter(complaint => complaint.title.includes(this.searchForm.TitleLike));\n      }\n      if (this.searchForm.HandlerLike) {\n        filtered = filtered.filter(complaint => complaint.handler && complaint.handler.includes(this.searchForm.HandlerLike));\n      }\n      if (this.searchForm.Status) {\n        filtered = filtered.filter(complaint => complaint.status === this.searchForm.Status);\n      }\n      return filtered;\n    },\n    // 总记录数\n    total() {\n      return this.filteredComplaints.length;\n    }\n  },\n  methods: {\n    // 返回上一页\n    goBack() {\n      this.$router.go(-1);\n    },\n    // 搜索\n    SearchClick() {\n      this.currentPage = 1;\n    },\n    // 重置搜索\n    ResetClick() {\n      this.searchForm = {\n        TitleLike: '',\n        HandlerLike: '',\n        Status: ''\n      };\n      this.currentPage = 1;\n    },\n    // 提交投诉\n    submitComplaint() {\n      if (!this.newComplaint.content.trim()) {\n        this.$message.warning('请输入投诉内容');\n        return;\n      }\n\n      // 简单提取标题（前10个字符）\n      const title = this.newComplaint.content.length > 10 ? this.newComplaint.content.substring(0, 10) + '...' : this.newComplaint.content;\n      const newComplaint = {\n        id: this.complaints.length + 1,\n        time: new Date().toLocaleString('zh-CN'),\n        title: title,\n        content: this.newComplaint.content,\n        handler: '',\n        status: 'pending',\n        reply: ''\n      };\n      this.complaints.unshift(newComplaint);\n      this.newComplaint.content = '';\n      this.$message.success('投诉提交成功');\n    },\n    // 显示投诉详情\n    showDetail(complaint) {\n      this.currentComplaint = {\n        ...complaint\n      };\n      this.showDialog = true;\n    },\n    // 关闭详情弹窗\n    closeDialog() {\n      this.showDialog = false;\n    },\n    // 获取状态文本\n    getStatusText(status) {\n      const statusMap = {\n        'pending': '待处理',\n        'processing': '处理中',\n        'resolved': '已解决'\n      };\n      return statusMap[status] || '未知';\n    },\n    // 分页大小改变\n    handleSizeChange(val) {\n      this.pageSize = val;\n      this.currentPage = 1;\n    },\n    // 当前页改变\n    handleCurrentChange(val) {\n      this.currentPage = val;\n    }\n  }\n};","map":{"version":3,"names":["name","data","newComplaint","content","title","searchForm","TitleLike","HandlerLike","Status","currentPage","pageSize","complaints","id","time","handler","status","reply","showDialog","currentComplaint","computed","filteredComplaints","filtered","filter","complaint","includes","total","length","methods","goBack","$router","go","SearchClick","ResetClick","submitComplaint","trim","$message","warning","substring","Date","toLocaleString","unshift","success","showDetail","closeDialog","getStatusText","statusMap","handleSizeChange","val","handleCurrentChange"],"sources":["src/views/Front/ComplainList.vue"],"sourcesContent":["<template>\r\n  <div class=\"app-container\">\r\n    <el-page-header class=\"card margin-top-lg\" @back=\"goBack\" content=\"我要投诉\"></el-page-header>\r\n\r\n    <!-- 投诉提交区域 -->\r\n    <el-card class=\"box-card margin-top-lg\">\r\n      <div class=\"complain-input-area\">\r\n        <div style=\"font-weight: bold; margin-bottom: 10px;\">提交投诉</div>\r\n        <textarea \r\n          class=\"complain-input\" \r\n          placeholder=\"请输入您的投诉内容...\" \r\n          v-model=\"newComplaint.content\"\r\n        ></textarea>\r\n        <button class=\"submit-btn\" @click=\"submitComplaint\">提交投诉</button>\r\n        <div style=\"clear: both;\"></div>\r\n      </div>\r\n    </el-card>\r\n\r\n    <!-- 投诉记录区域 -->\r\n    <el-card class=\"box-card margin-top-lg\">\r\n      <div slot=\"header\" class=\"clearfix\">\r\n        <el-button type=\"primary\" size=\"mini\" icon=\"el-icon-search\" @click=\"SearchClick\">搜 索</el-button>\r\n        <el-button type=\"warning\" size=\"mini\" @click=\"ResetClick\" icon=\"el-icon-s-promotion\">重 置</el-button>\r\n      </div>\r\n      \r\n      <div class=\"tb-body\">\r\n        <el-form ref=\"searchFormRef\" :model=\"searchForm\" :inline=\"true\" label-width=\"120px\" :style=\"`flex:1;`\">\r\n          <el-form-item label=\"投诉标题\" prop=\"TitleLike\">\r\n            <el-input v-model.trim=\"searchForm.TitleLike\" placeholder=\"请输入标题\" :clearable=\"true\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"处理人\" prop=\"HandlerLike\">\r\n            <el-input v-model.trim=\"searchForm.HandlerLike\" placeholder=\"请输入处理人\" :clearable=\"true\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"处理状态\" prop=\"Status\">\r\n            <el-select v-model=\"searchForm.Status\" placeholder=\"请选择状态\" :clearable=\"true\">\r\n              <el-option label=\"待处理\" value=\"pending\"></el-option>\r\n              <el-option label=\"处理中\" value=\"processing\"></el-option>\r\n              <el-option label=\"已解决\" value=\"resolved\"></el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n        </el-form>\r\n      </div>\r\n      \r\n      <!-- 投诉记录表格 -->\r\n      <el-table :data=\"filteredComplaints\" style=\"width: 100%\">\r\n        <el-table-column prop=\"time\" label=\"投诉时间\" width=\"160\"></el-table-column>\r\n        <el-table-column prop=\"title\" label=\"投诉标题\" width=\"180\"></el-table-column>\r\n        <el-table-column prop=\"content\" label=\"投诉内容\">\r\n          <template slot-scope=\"scope\">\r\n            <div class=\"complain-content\">{{ scope.row.content }}</div>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"handler\" label=\"处理人\" width=\"120\"></el-table-column>\r\n        <el-table-column prop=\"status\" label=\"处理状态\" width=\"100\">\r\n          <template slot-scope=\"scope\">\r\n            <span :class=\"`status-${scope.row.status}`\">\r\n              {{ getStatusText(scope.row.status) }}\r\n            </span>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column label=\"操作\" width=\"100\">\r\n          <template slot-scope=\"scope\">\r\n            <span class=\"view-detail\" @click=\"showDetail(scope.row)\">查看详情</span>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      \r\n      <!-- 分页 -->\r\n      <div class=\"pagination-container\">\r\n        <el-pagination\r\n          @size-change=\"handleSizeChange\"\r\n          @current-change=\"handleCurrentChange\"\r\n          :current-page=\"currentPage\"\r\n          :page-sizes=\"[10, 20, 50, 100]\"\r\n          :page-size=\"pageSize\"\r\n          layout=\"total, sizes, prev, pager, next, jumper\"\r\n          :total=\"total\">\r\n        </el-pagination>\r\n      </div>\r\n    </el-card>\r\n    \r\n    <!-- 投诉详情弹窗 -->\r\n    <div class=\"detail-dialog\" v-if=\"showDialog\">\r\n      <div class=\"dialog-content\">\r\n        <div class=\"dialog-header\">\r\n          <span>投诉详情</span>\r\n          <span class=\"close-btn\" @click=\"closeDialog\">×</span>\r\n        </div>\r\n        <div class=\"dialog-body\">\r\n          <div class=\"detail-item\">\r\n            <div class=\"detail-label\">投诉时间</div>\r\n            <div class=\"detail-value\">{{ currentComplaint.time }}</div>\r\n          </div>\r\n          <div class=\"detail-item\">\r\n            <div class=\"detail-label\">投诉标题</div>\r\n            <div class=\"detail-value\">{{ currentComplaint.title }}</div>\r\n          </div>\r\n          <div class=\"detail-item\">\r\n            <div class=\"detail-label\">投诉内容</div>\r\n            <div class=\"detail-value\">{{ currentComplaint.content }}</div>\r\n          </div>\r\n          <div class=\"detail-item\">\r\n            <div class=\"detail-label\">处理人</div>\r\n            <div class=\"detail-value\">{{ currentComplaint.handler || '--' }}</div>\r\n          </div>\r\n          <div class=\"detail-item\">\r\n            <div class=\"detail-label\">处理状态</div>\r\n            <div class=\"detail-value\">\r\n              <span :class=\"`status-${currentComplaint.status}`\">\r\n                {{ getStatusText(currentComplaint.status) }}\r\n              </span>\r\n            </div>\r\n          </div>\r\n          <div class=\"detail-item\" v-if=\"currentComplaint.reply\">\r\n            <div class=\"detail-label\">处理回复</div>\r\n            <div class=\"detail-value\">{{ currentComplaint.reply }}</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"ComplainList\",\r\n  data() {\r\n    return {\r\n      // 新投诉内容\r\n      newComplaint: {\r\n        content: '',\r\n        title: ''\r\n      },\r\n      // 搜索表单\r\n      searchForm: {\r\n        TitleLike: '',\r\n        HandlerLike: '',\r\n        Status: ''\r\n      },\r\n      // 当前页码\r\n      currentPage: 1,\r\n      // 每页显示条数\r\n      pageSize: 10,\r\n      // 投诉记录数据\r\n      complaints: [\r\n        {\r\n          id: 1,\r\n          time: '2023-10-15 14:30',\r\n          title: '空调温度问题',\r\n          content: '自习室空调温度太低，希望能调高一些',\r\n          handler: '管理员A',\r\n          status: 'resolved',\r\n          reply: '已调整空调温度，感谢您的反馈。'\r\n        },\r\n        {\r\n          id: 2,\r\n          time: '2023-10-14 09:15',\r\n          title: '系统卡顿问题',\r\n          content: '座位预约系统经常卡顿，希望优化',\r\n          handler: '管理员B',\r\n          status: 'processing',\r\n          reply: '我们正在对系统进行优化，预计下周完成。'\r\n        },\r\n        {\r\n          id: 3,\r\n          time: '2023-10-12 16:45',\r\n          title: '噪音投诉',\r\n          content: '有同学在自习室大声喧哗，影响学习',\r\n          handler: '',\r\n          status: 'pending',\r\n          reply: ''\r\n        }\r\n      ],\r\n      // 是否显示详情弹窗\r\n      showDialog: false,\r\n      // 当前查看的投诉详情\r\n      currentComplaint: {}\r\n    }\r\n  },\r\n  computed: {\r\n    // 过滤后的投诉记录（根据搜索条件）\r\n    filteredComplaints() {\r\n      let filtered = this.complaints;\r\n      \r\n      if (this.searchForm.TitleLike) {\r\n        filtered = filtered.filter(complaint => \r\n          complaint.title.includes(this.searchForm.TitleLike)\r\n        );\r\n      }\r\n      \r\n      if (this.searchForm.HandlerLike) {\r\n        filtered = filtered.filter(complaint => \r\n          complaint.handler && complaint.handler.includes(this.searchForm.HandlerLike)\r\n        );\r\n      }\r\n      \r\n      if (this.searchForm.Status) {\r\n        filtered = filtered.filter(complaint => \r\n          complaint.status === this.searchForm.Status\r\n        );\r\n      }\r\n      \r\n      return filtered;\r\n    },\r\n    // 总记录数\r\n    total() {\r\n      return this.filteredComplaints.length;\r\n    }\r\n  },\r\n  methods: {\r\n    // 返回上一页\r\n    goBack() {\r\n      this.$router.go(-1)\r\n    },\r\n    // 搜索\r\n    SearchClick() {\r\n      this.currentPage = 1;\r\n    },\r\n    // 重置搜索\r\n    ResetClick() {\r\n      this.searchForm = {\r\n        TitleLike: '',\r\n        HandlerLike: '',\r\n        Status: ''\r\n      };\r\n      this.currentPage = 1;\r\n    },\r\n    // 提交投诉\r\n    submitComplaint() {\r\n      if (!this.newComplaint.content.trim()) {\r\n        this.$message.warning('请输入投诉内容');\r\n        return;\r\n      }\r\n      \r\n      // 简单提取标题（前10个字符）\r\n      const title = this.newComplaint.content.length > 10 \r\n        ? this.newComplaint.content.substring(0, 10) + '...' \r\n        : this.newComplaint.content;\r\n      \r\n      const newComplaint = {\r\n        id: this.complaints.length + 1,\r\n        time: new Date().toLocaleString('zh-CN'),\r\n        title: title,\r\n        content: this.newComplaint.content,\r\n        handler: '',\r\n        status: 'pending',\r\n        reply: ''\r\n      };\r\n      \r\n      this.complaints.unshift(newComplaint);\r\n      this.newComplaint.content = '';\r\n      this.$message.success('投诉提交成功');\r\n    },\r\n    // 显示投诉详情\r\n    showDetail(complaint) {\r\n      this.currentComplaint = { ...complaint };\r\n      this.showDialog = true;\r\n    },\r\n    // 关闭详情弹窗\r\n    closeDialog() {\r\n      this.showDialog = false;\r\n    },\r\n    // 获取状态文本\r\n    getStatusText(status) {\r\n      const statusMap = {\r\n        'pending': '待处理',\r\n        'processing': '处理中',\r\n        'resolved': '已解决'\r\n      };\r\n      return statusMap[status] || '未知';\r\n    },\r\n    // 分页大小改变\r\n    handleSizeChange(val) {\r\n      this.pageSize = val;\r\n      this.currentPage = 1;\r\n    },\r\n    // 当前页改变\r\n    handleCurrentChange(val) {\r\n      this.currentPage = val;\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.app-container {\r\n  padding: 20px;\r\n  max-width: 1300px;\r\n  margin: 0 auto;\r\n}\r\n\r\n.margin-top-lg {\r\n  margin-top: 20px;\r\n}\r\n\r\n.margin-bottom-lg {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.card {\r\n  box-shadow: 0 2px 4px rgba(0, 0, 0, .12), 0 0 6px rgba(0, 0, 0, .04);\r\n  border-radius: 10px;\r\n  padding: 20px;\r\n  background: white;\r\n}\r\n\r\n.el-page-header {\r\n  padding: 10px 20px;\r\n  border-radius: 10px;\r\n}\r\n\r\n.box-card {\r\n  border-radius: 10px;\r\n}\r\n\r\n.clearfix:after {\r\n  content: \"\";\r\n  display: table;\r\n  clear: both;\r\n}\r\n\r\n.tb-body {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.el-form-item {\r\n  margin-bottom: 15px;\r\n}\r\n\r\n.el-table {\r\n  margin-top: 20px;\r\n}\r\n\r\n.el-table th {\r\n  background-color: #f5f7fa;\r\n}\r\n\r\n.complain-content {\r\n  max-width: 300px;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  white-space: nowrap;\r\n}\r\n\r\n.view-detail {\r\n  color: #28b2d4;\r\n  cursor: pointer;\r\n}\r\n\r\n.status-processing {\r\n  color: #e6a23c;\r\n}\r\n\r\n.status-resolved {\r\n  color: #67c23a;\r\n}\r\n\r\n.status-pending {\r\n  color: #f56c6c;\r\n}\r\n\r\n.complain-input-area {\r\n  margin-top: 20px;\r\n  border-top: 1px solid #ebeef5;\r\n  padding-top: 20px;\r\n}\r\n\r\n.complain-input {\r\n  width: 100%;\r\n  min-height: 100px;\r\n  margin-bottom: 15px;\r\n  border: 1px solid #dcdfe6;\r\n  border-radius: 4px;\r\n  padding: 10px;\r\n  resize: vertical;\r\n}\r\n\r\n.complain-input:focus {\r\n  outline: none;\r\n  border-color: #28b2d4;\r\n}\r\n\r\n.submit-btn {\r\n  background-color: #28b2d4;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 4px;\r\n  padding: 10px 20px;\r\n  cursor: pointer;\r\n  float: right;\r\n}\r\n\r\n.detail-dialog {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  background-color: rgba(0, 0, 0, 0.5);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  z-index: 1000;\r\n}\r\n\r\n.dialog-content {\r\n  background: white;\r\n  width: 600px;\r\n  border-radius: 4px;\r\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.dialog-header {\r\n  padding: 15px 20px;\r\n  border-bottom: 1px solid #e8e8e8;\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n  display: flex;\r\n  justify-content: space-between;\r\n}\r\n\r\n.close-btn {\r\n  cursor: pointer;\r\n  color: #909399;\r\n}\r\n\r\n.dialog-body {\r\n  padding: 20px;\r\n  max-height: 400px;\r\n  overflow-y: auto;\r\n}\r\n\r\n.detail-item {\r\n  margin-bottom: 15px;\r\n}\r\n\r\n.detail-label {\r\n  font-weight: bold;\r\n  margin-bottom: 5px;\r\n  color: #606266;\r\n}\r\n\r\n.detail-value {\r\n  color: #303133;\r\n}\r\n\r\n.pagination-container {\r\n  margin-top: 20px;\r\n  text-align: right;\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}